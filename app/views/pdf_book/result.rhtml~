<style>
td{
vertical-align:top;
}
</style>
<div id="matches">


	<table cellspacing=2 style="border:1px solid black" border=1>

	

	<% @results.each_with_index do |result,i| %>
	<tr>
			<td align="left" valign="top">
				<div class="photo">
				
				<%= image_tag(result[:figure].photo.url, :width=>200) %>

				<b><%= truncate(result[:book].title, 60)%></b><br>
				page <b><%= result[:page].number %></b>
				</div>				
	
			</td>
<td>
<%= result[:figure].label%>
</td>

<td>
<%= result[:figure].ref %>
</td>



<td>
<% labels, refs = result[:page].extract_labels_and_refs %>

Labels:<br>
<ul>
<% labels.each do |x| %>
<li><%= x %></li>
<% end %>
</ul>

<p>
Refs:
<ul>
<% refs.each do |x,y| %>
<li><b><%= x %></b>: <%= y%></li>
<% end %>
</ul>

</td>
			<td>
<pre style="font-size:10px;"><%= result[:page].text %></pre>
</td>
			<td>
				<%= highlight result[:page].text, "Figure" %>
			</td>
	</tr>
	<% end %>
	
		
	
	
	</table>
	

</div>